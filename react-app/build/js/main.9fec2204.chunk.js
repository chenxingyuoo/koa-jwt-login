(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){},170:function(e,t,a){e.exports=a(357)},175:function(e,t,a){},179:function(e,t,a){},303:function(e,t,a){},357:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(7),o=a.n(s),l=(a(175),a(177),a(26)),i=a(27),c=a(29),u=a(28),m=a(30),d=(a(179),a(153)),p=a.n(d),h=(a(199),a(364)),f=p.a.create({baseURL:""});f.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),f.interceptors.response.use(function(e){if(e.status>=200&&e.status<=300){if(200===e.data.code)return e.data;if(500===e.data.code)return h.a.warning(e.data.message),Promise.reject(e);if(1e3===e.data.code)return window.location.hash="#/login",Promise.reject(e)}},function(e){return e.response&&e.response.status>=400&&h.a.error("\u7f51\u7edc\u53d1\u751f\u9519\u8bef"),Promise.reject(e)}),f.get=function(e){return f({url:e.url,method:"GET",params:e.data})},f.post=function(e){return f({url:e.url,method:"POST",data:e.data,headers:{"Content-Type":"application/json;charset=UTF-8"}})};var g=f,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g.post({url:"/user/login",data:e})},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g.post({url:"/user/registered",data:e})},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g.get({url:"/user/info",data:e})},E=a(366),w=a(368),k=a(359),j=a(361),O=a(363),S=a(9),U=a(79),C=(a(137),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){console.log("this.props",a.props),e.preventDefault(),a.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),v(t).then(function(e){b().then(function(){a.props.history.push("/user/list")})}))})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(j.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(j.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(S.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(j.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(S.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(j.a.Item,null,r.a.createElement(U.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),r.a.createElement("div",null,r.a.createElement("a",{href:"#/registered"},"register now!"))))}}]),t}(r.a.Component)),P=j.a.create()(C),x=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){console.log("this.props",a.props),e.preventDefault(),a.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),y(t).then(function(e){a.props.history.push("/login")}))})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(j.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(j.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(S.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(j.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(S.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(j.a.Item,null,r.a.createElement(U.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Registered"),r.a.createElement("div",null,r.a.createElement("a",{href:"#/login"},"login now!"))))}}]),t}(r.a.Component),L=j.a.create()(x),F=a(167),I=a(362),T=a(360),N=a(365),M=a(358),D=a(367),q=(a(303),N.a.Header),R=N.a.Sider,A=N.a.Content,B=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,{id:"layout-custom-trigger"},r.a.createElement(R,{trigger:null,collapsible:!0,collapsed:this.state.collapsed},r.a.createElement("div",{className:"logo"}),r.a.createElement(M.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},r.a.createElement(M.a.Item,{key:"1"},r.a.createElement(D.a,{to:"#/login"},r.a.createElement(S.a,{type:"user"}),r.a.createElement("span",null,"nav 1"))),r.a.createElement(M.a.Item,{key:"2"},r.a.createElement(S.a,{type:"video-camera"}),r.a.createElement("span",null,"nav 2")),r.a.createElement(M.a.Item,{key:"3"},r.a.createElement(S.a,{type:"upload"}),r.a.createElement("span",null,"nav 3")))),r.a.createElement(N.a,null,r.a.createElement(q,{style:{background:"#fff",padding:0}},r.a.createElement(S.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle})),r.a.createElement(A,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280}},this.props.children)))}}]),t}(r.a.Component),W=I.a.confirm,H=O.a.Search,J=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(j.a,{className:"login-form"},r.a.createElement(j.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(S.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(j.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(S.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Password"}))))}}]),t}(n.Component);var _=j.a.create({mapPropsToFields:function(e){return{username:j.a.createFormField({value:e.selectUser?e.selectUser.username:""}),password:j.a.createFormField({value:e.selectUser?e.selectUser.password:""})}}})(J),z=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={visible:!1,confirmLoading:!1},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"showModal",value:function(){this.setState({visible:!0})}},{key:"handleOk",value:function(){var e=this;this.setState({confirmLoading:!0}),this.refs.UserForm.validateFields(function(t,a){t?e.setState({confirmLoading:!1}):(console.log("Received values of form: ",a),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g.post({url:"/user/save",data:e})}(Object(F.a)({id:e.props.selectUser?e.props.selectUser._id:null},a)).then(function(){h.a.success("\u4fdd\u5b58\u6210\u529f"),e.setState({visible:!1,confirmLoading:!1}),e.props.getUserList()}).catch(function(){e.setState({confirmLoading:!1})}))})}},{key:"handleCancel",value:function(){console.log("Clicked cancel button"),this.setState({visible:!1})}},{key:"render",value:function(){return r.a.createElement(I.a,{title:"Edit",visible:this.state.visible,onOk:this.handleOk.bind(this),confirmLoading:this.state.confirmLoading,onCancel:this.handleCancel.bind(this)},r.a.createElement(_,{selectUser:this.props.selectUser,ref:"UserForm"}))}}]),t}(n.Component),G=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={selectUser:null,params:{keyword:"",currentPage:1,pageSize:10},data:{list:[],total:0}},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getList()}},{key:"showModal",value:function(e){this.setState({selectUser:e}),this.refs.UserFormModal.showModal()}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"username"},{title:"Password",dataIndex:"password"},{title:"Action",dataIndex:"action",render:function(t,a,n){return r.a.createElement("span",null,r.a.createElement("a",{onClick:e.deleteUser.bind(e,a,n),style:{marginRight:"10px"}},"delete"),r.a.createElement("a",{onClick:e.showModal.bind(e,a,n)},"update"))}}];return r.a.createElement(B,null,r.a.createElement("div",{className:"App"},r.a.createElement(z,{ref:"UserFormModal",selectUser:this.state.selectUser,getUserList:this.getList.bind(this)}),r.a.createElement(H,{placeholder:"input keyword",onSearch:this.onSearch.bind(this),style:{width:200,marginRight:10}}),r.a.createElement(U.a,{type:"primary",onClick:this.showModal.bind(this,null),style:{marginBottom:"10px"}},"add"),r.a.createElement(T.a,{dataSource:this.state.data.list,columns:t,pagination:{total:this.state.data.total,showTotal:function(e){return"Total ".concat(e," items")},onChange:this.pageChange.bind(this)}})))}},{key:"onSearch",value:function(e){this.state.params.keyword=e,this.setState({params:this.state.params}),this.getList()}},{key:"getList",value:function(){var e=this;(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g.get({url:"/user/list",data:e})})(this.state.params).then(function(t){e.setState({data:t.data})})}},{key:"pageChange",value:function(e){this.state.params.currentPage=e,this.setState({params:this.state.params}),this.getList()}},{key:"deleteUser",value:function(e,t){var a=this;W({title:"Do you Want to delete these items?",content:"",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g.post({url:"/user/delete",data:e})})({id:e._id}).then(function(e){h.a.success("\u5220\u9664\u6210\u529f"),a.getList()})},onCancel:function(){console.log("Cancel")}})}}]),t}(n.Component),K=function(){return r.a.createElement(E.a,null,r.a.createElement(w.a,null,r.a.createElement(k.a,{exact:!0,path:"/login",component:P}),r.a.createElement(k.a,{exact:!0,path:"/registered",component:L}),r.a.createElement(k.a,{exact:!0,path:"/user/list",component:G})))},Y=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){b()}},{key:"render",value:function(){return r.a.createElement(K,null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[170,2,1]]]);
//# sourceMappingURL=main.9fec2204.chunk.js.map